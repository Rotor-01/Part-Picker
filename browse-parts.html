<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Browse Parts - PC Part Picker</title>
 <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #0f0f1a;
      color: #fff;
      line-height: 1.6;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      backdrop-filter: blur(5px);
      background-color: rgba(15, 15, 26, 0.9);
      padding: 15px 40px;
      position: sticky;
      top: 0;
      z-index: 1000;
      border-bottom: 1px solid #2a2a3a;
    }

    header h1 {
      font-size: 1.8rem;
      color: #fff;
      background: linear-gradient(135deg, #6a26ad, #a78bfa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .main-nav ul {
      list-style: none;
      display: flex;
      gap: 25px;
    }

    .main-nav a {
      text-decoration: none;
      color: #ccc;
      font-weight: 500;
      transition: color 0.3s ease;
      padding: 8px 12px;
      border-radius: 6px;
    }

    .main-nav a:hover {
      color: #a78bfa;
      background-color: rgba(106, 38, 173, 0.1);
    }

    .main-nav a.active {
      color: #a78bfa;
      background-color: rgba(106, 38, 173, 0.2);
    }

    .content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 30px 20px;
    }

    .page-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .page-header h2 {
      font-size: 2.5rem;
      margin-bottom: 15px;
      background: linear-gradient(135deg, #fff 0%, #a78bfa 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .page-header p {
      color: #aaa;
      font-size: 1.1rem;
      max-width: 700px;
      margin: 0 auto;
    }

    .catalog-controls {
      background: linear-gradient(145deg, #1a1a2a, #151522);
      padding: 25px;
      border-radius: 16px;
      border: 1px solid #2a2a3a;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      margin-bottom: 30px;
    }

    .controls-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      gap: 20px;
    }

    .controls-header h3 {
      color: #a78bfa;
      margin: 0;
      font-size: 1.5rem;
    }

    .filter-controls {
      display: flex;
      gap: 15px;
      align-items: center;
      flex-wrap: wrap;
    }

    #category-filter, #price-filter, #search-input {
      padding: 12px 15px;
      border-radius: 8px;
      border: 1px solid #3a3a4a;
      background-color: #1e1e2f;
      color: white;
      font-size: 0.9rem;
      transition: border-color 0.3s ease;
    }

    #category-filter, #price-filter {
      min-width: 180px;
    }

    #category-filter:focus, #price-filter:focus, #search-input:focus {
      outline: none;
      border-color: #6a26ad;
    }

    #search-input {
      flex: 1;
      min-width: 200px;
    }

    .sort-controls {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .sort-btn {
      padding: 10px 15px;
      border-radius: 8px;
      border: 1px solid #3a3a4a;
      background-color: #1e1e2f;
      color: #ccc;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    .sort-btn:hover {
      border-color: #6a26ad;
      color: #a78bfa;
    }

    .sort-btn.active {
      background-color: rgba(106, 38, 173, 0.2);
      border-color: #6a26ad;
      color: #a78bfa;
    }

    .catalog-container {
      display: grid;
      grid-template-columns: 1fr 3fr;
      gap: 30px;
      margin-bottom: 50px;
    }

    .category-sidebar {
      background: linear-gradient(145deg, #1a1a2a, #151522);
      padding: 25px;
      border-radius: 16px;
      height: fit-content;
      position: sticky;
      top: 100px;
      border: 1px solid #2a2a3a;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .category-sidebar h3 {
      color: #a78bfa;
      margin-bottom: 20px;
      font-size: 1.5rem;
      text-align: center;
      padding-bottom: 15px;
      border-bottom: 1px solid #2a2a3a;
    }

    .category-list {
      list-style: none;
    }

    .category-item {
      margin-bottom: 10px;
    }

    .category-btn {
      display: flex;
      align-items: center;
      gap: 10px;
      width: 100%;
      padding: 12px 15px;
      background-color: #1e1e2f;
      border: 1px solid #2a2a3a;
      border-radius: 8px;
      color: #ccc;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: left;
    }

    .category-btn:hover {
      border-color: #6a26ad;
      color: #a78bfa;
    }

    .category-btn.active {
      background-color: rgba(106, 38, 173, 0.2);
      border-color: #6a26ad;
      color: #a78bfa;
    }

    .category-icon {
      font-size: 1.2rem;
    }

    .parts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 25px;
    }

    .part-card {
      background: linear-gradient(145deg, #1a1a2a, #151522);
      padding: 25px;
      border-radius: 16px;
      border: 1px solid #2a2a3a;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
    }

    .part-card:hover {
      border-color: #6a26ad;
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(106, 38, 173, 0.2);
    }

    .part-image {
      text-align: center;
      margin-bottom: 20px;
      height: 160px;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #2a2a3a;
      border-radius: 8px;
      overflow: hidden;
    }

    .part-image img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }

    .part-placeholder {
      color: #777;
      font-size: 3rem;
    }

    .part-info h4 {
      color: #fff;
      margin-bottom: 10px;
      font-size: 1.2rem;
      line-height: 1.4;
    }

    .part-brand {
      color: #a78bfa;
      font-weight: bold;
      margin-bottom: 8px;
      font-size: 0.9rem;
    }

    .part-price {
      color: #90ee90;
      font-weight: bold;
      font-size: 1.3rem;
      margin-bottom: 15px;
    }

    .part-details {
      font-size: 0.85rem;
      color: #ccc;
      margin-bottom: 20px;
      flex-grow: 1;
    }

    .part-details .detail {
      display: inline-block;
      background-color: #2a2a3a;
      padding: 4px 8px;
      border-radius: 4px;
      margin-right: 5px;
      margin-bottom: 5px;
      font-size: 0.8rem;
    }

    .part-actions {
      display: flex;
      gap: 10px;
      margin-top: auto;
    }

    .part-link {
      display: inline-block;
      padding: 10px 20px;
      background: linear-gradient(135deg, #6a26ad, #501c85);
      color: white;
      text-decoration: none;
      border-radius: 6px;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      font-weight: 600;
      text-align: center;
      flex: 1;
    }

    .part-link:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(106, 38, 173, 0.4);
    }

    .add-to-build {
      display: inline-block;
      padding: 10px 20px;
      background: transparent;
      color: #a78bfa;
      border: 2px solid #6a26ad;
      border-radius: 6px;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      font-weight: 600;
      text-align: center;
      cursor: pointer;
      flex: 1;
    }

    .add-to-build:hover {
      background: rgba(106, 38, 173, 0.1);
      transform: translateY(-2px);
    }

    .category-section {
      margin-bottom: 50px;
    }

    .category-header {
      font-size: 1.8rem;
      margin: 40px 0 20px 0;
      color: #a78bfa;
      text-align: left;
      border-bottom: 2px solid #2a2a3a;
      padding-bottom: 10px;
    }

    .no-results {
      text-align: center;
      padding: 40px;
      color: #ccc;
      background-color: #1a1a2a;
      border-radius: 8px;
      border: 1px solid #2a2a3a;
      grid-column: 1 / -1;
    }

    .stats-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding: 15px 20px;
      background-color: #1a1a2a;
      border-radius: 8px;
      border: 1px solid #2a2a3a;
    }

    .stats-info {
      color: #ccc;
      font-size: 0.9rem;
    }

    .cta-section {
      padding: 60px 40px;
      background: linear-gradient(145deg, #1a1a2a, #151522);
      text-align: center;
      border-radius: 16px;
      border: 1px solid #2a2a3a;
      margin-top: 40px;
    }

    .cta-section h2 {
      font-size: 2rem;
      margin-bottom: 30px;
      color: #fff;
    }

    .cta-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
    }

    .feature-btn {
      display: inline-block;
      padding: 12px 25px;
      background: linear-gradient(135deg, #6a26ad, #501c85);
      color: white;
      text-decoration: none;
      border-radius: 8px;
      font-weight: 600;
      transition: all 0.3s ease;
      border: none;
      cursor: pointer;
      font-size: 0.95rem;
    }

    .feature-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 7px 15px rgba(106, 38, 173, 0.4);
      background: linear-gradient(135deg, #501c85, #3a1461);
    }

    footer {
      text-align: center;
      padding: 30px;
      background-color: #0a0a14;
      font-size: 0.9rem;
      color: #888;
      border-top: 1px solid #2a2a3a;
      margin-top: 50px;
    }

    /* Responsive Design */
    @media (max-width: 1200px) {
      .catalog-container {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      
      .category-sidebar {
        position: static;
      }
    }

    @media (max-width: 768px) {
      header {
        flex-direction: column;
        padding: 15px 20px;
        text-align: center;
      }
      
      .main-nav ul {
        margin-top: 15px;
        flex-wrap: wrap;
        justify-content: center;
        gap: 15px;
      }
      
      .content {
        padding: 20px 15px;
      }
      
      .page-header h2 {
        font-size: 2rem;
      }
      
      .controls-header {
        flex-direction: column;
        align-items: stretch;
      }
      
      .filter-controls {
        flex-direction: column;
      }
      
      #search-input {
        min-width: auto;
      }
      
      .parts-grid {
        grid-template-columns: 1fr;
      }
      
      .cta-buttons {
        flex-direction: column;
        align-items: center;
      }
      
      .feature-btn {
        width: 100%;
        max-width: 300px;
      }
    }

    @media (max-width: 480px) {
      .page-header h2 {
        font-size: 1.8rem;
      }
      
      .part-card {
        padding: 20px;
      }
      
      .catalog-controls, .category-sidebar {
        padding: 20px;
      }
      
      .part-actions {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>THE TRINITY</h1>
    <nav class="main-nav">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="index.html#about">About</a></li>
        <li><a href="ai-build.html">AI Build</a></li>
        <li><a href="manual-build.html">Manual Build</a></li>
        <li><a href="browse-parts.html" class="active">Parts</a></li>
      </ul>
    </nav>
  </header>

  <main class="content">
    <section class="page-header">
      <h2>PC Parts Catalog</h2>
      <p>Browse our extensive collection of PC components. Filter by category, price, or search for specific parts.</p>
    </section>

    <section class="catalog-controls">
      <div class="controls-header">
        <h3>Filter & Search</h3>
        <div class="filter-controls">
          <select id="category-filter">
            <option value="all">All Categories</option>
            <option value="CPUs">CPUs</option>
            <option value="Motherboards">Motherboards</option>
            <option value="GPUs">GPUs</option>
            <option value="RAM">RAM</option>
            <option value="Storage">Storage</option>
            <option value="PSUs">Power Supplies</option>
            <option value="Cases">Cases</option>
          </select>
          <select id="price-filter">
            <option value="all">Any Price</option>
            <option value="budget">Budget ($0-100)</option>
            <option value="mid-range">Mid-Range ($100-300)</option>
            <option value="high-end">High-End ($300+)</option>
          </select>
          <input type="text" id="search-input" placeholder="Search parts...">
        </div>
      </div>
      <div class="sort-controls">
        <span>Sort by:</span>
        <button class="sort-btn active" data-sort="name">Name</button>
        <button class="sort-btn" data-sort="price-low">Price: Low to High</button>
        <button class="sort-btn" data-sort="price-high">Price: High to Low</button>
        <button class="sort-btn" data-sort="brand">Brand</button>
      </div>
    </section>

    <div class="catalog-container">
      <aside class="category-sidebar">
        <h3>Categories</h3>
        <ul class="category-list">
          <li class="category-item">
            <button class="category-btn active" data-category="all">
              <span class="category-icon">🔍</span> All Parts
            </button>
          </li>
          <li class="category-item">
            <button class="category-btn" data-category="CPUs">
              <span class="category-icon">⚡</span> CPUs
            </button>
          </li>
          <li class="category-item">
            <button class="category-btn" data-category="Motherboards">
              <span class="category-icon">🔌</span> Motherboards
            </button>
          </li>
          <li class="category-item">
            <button class="category-btn" data-category="GPUs">
              <span class="category-icon">🎮</span> GPUs
            </button>
          </li>
          <li class="category-item">
            <button class="category-btn" data-category="RAM">
              <span class="category-icon">🧠</span> RAM
            </button>
          </li>
          <li class="category-item">
            <button class="category-btn" data-category="Storage">
              <span class="category-icon">💾</span> Storage
            </button>
          </li>
          <li class="category-item">
            <button class="category-btn" data-category="PSUs">
              <span class="category-icon">🔋</span> Power Supplies
            </button>
          </li>
          <li class="category-item">
            <button class="category-btn" data-category="Cases">
              <span class="category-icon">🏠</span> Cases
            </button>
          </li>
        </ul>
      </aside>

      <section class="catalog-main">
        <div class="stats-bar">
          <div class="stats-info" id="results-count">Showing all parts</div>
          <div class="stats-info" id="total-count">Total: 0 parts</div>
        </div>

        <div class="parts-grid" id="parts-gallery">
          </div>
      </section>
    </div>

    <section class="cta-section">
      <h2>Ready to Build Your PC?</h2>
      <div class="cta-buttons">
        <a href="ai-build.html" class="feature-btn">Try AI Assistant</a>
        <a href="manual-build.html" class="feature-btn">Try Manual Builder</a>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 PC Part Picker. Built for builders, by builders.</p>
  </footer>

  <script>
    // --- THIS SCRIPT HAS BEEN MODIFIED TO FETCH 'data.json' ---

    // This will hold the data from data.json
    let pcData = {};

    // DOM elements
    const partsGallery = document.getElementById('parts-gallery');
    const categoryFilter = document.getElementById('category-filter');
    const priceFilter = document.getElementById('price-filter');
    const searchInput = document.getElementById('search-input');
    const sortButtons = document.querySelectorAll('.sort-btn');
    const categoryButtons = document.querySelectorAll('.category-btn');
    const resultsCount = document.getElementById('results-count');
    const totalCount = document.getElementById('total-count');

    // Current filter state
    let currentFilters = {
      category: 'all',
      price: 'all',
      search: '',
      sort: 'name'
    };

    // Initialize the page on DOMContentLoaded
    document.addEventListener('DOMContentLoaded', initializeApp);

    /**
     * Main initialization function.
     * Fetches data, then sets up the page.
     */
    async function initializeApp() {
      try {
        const response = await fetch('data.json');
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        pcData = await response.json();
        
        // Once data is loaded, set up the rest of the page
        loadParts();
        updateTotalCount();
        setupEventListeners();
        
      } catch (error) {
        console.error('Failed to load component data:', error);
        partsGallery.innerHTML = `
          <div class="no-results">
            <h3>⚠️ Failed to load component data</h3>
            <p>Please ensure 'data.json' is in the correct folder.</p>
          </div>
        `;
      }
    }

    /**
     * Sets up all event listeners for filters and buttons.
     */
    function setupEventListeners() {
      categoryFilter.addEventListener('change', function() {
        currentFilters.category = this.value;
        loadParts();
      });

      priceFilter.addEventListener('change', function() {
        currentFilters.price = this.value;
        loadParts();
      });

      searchInput.addEventListener('input', function() {
        currentFilters.search = this.value.toLowerCase();
        loadParts();
      });

      // Sort buttons
      sortButtons.forEach(button => {
        button.addEventListener('click', function() {
          const sortType = this.dataset.sort;
          currentFilters.sort = sortType;
          sortButtons.forEach(btn => btn.classList.remove('active'));
          this.classList.add('active');
          loadParts();
        });
      });

      // Category sidebar buttons
      categoryButtons.forEach(button => {
        button.addEventListener('click', function() {
          const category = this.dataset.category;
          currentFilters.category = category;
          categoryButtons.forEach(btn => btn.classList.remove('active'));
          this.classList.add('active');
          categoryFilter.value = category;
          loadParts();
        });
      });
    }

    /**
     * Helper function to get specific details from a part
     * This is compatible with your data.json structure
     */
    function getPartDetails(part, category) {
      const details = [];
      switch (category) {
        case 'CPUs':
          if (part.cores) details.push(`${part.cores} Cores`);
          if (part.socket) details.push(part.socket);
          break;
        case 'GPUs':
          if (part.vram) details.push(`${part.vram}GB VRAM`);
          if (part.powerdraw) details.push(`${part.powerdraw}W`);
          break;
        case 'Motherboards':
          if (part.socket) details.push(part.socket);
          if (part.formfactor) details.push(part.formfactor);
          break;
        case 'PSUs':
          if (part.wattage) details.push(`${part.wattage}W`);
          if (part.rating) details.push(part.rating);
          break;
        case 'Storage':
          if (part.capacity) details.push(part.capacity);
          if (part.socket) details.push(part.socket);
          break;
        case 'Cases':
          if (part.formfactor) details.push(part.formfactor);
          if (part.color) details.push(part.color);
          break;
        case 'RAM':
          if (part.specs && part.specs.type) details.push(part.specs.type);
          if (part.specs && part.specs.capacity) details.push(part.specs.capacity);
          if (part.specs && part.specs.speed) details.push(part.specs.speed);
          break;
      }
      return details.slice(0, 3); // Max 3 details
    }

    /**
     * Load and display parts based on current filters
     */
    function loadParts() {
      partsGallery.innerHTML = '';
      
      // Get all parts and add their category
      let allParts = [];
      for (const category in pcData) {
        // Check if pcData has this property directly
        if (Object.prototype.hasOwnProperty.call(pcData, category)) {
          const items = pcData[category];
          // Ensure items is an array before iterating
          if (Array.isArray(items)) {
            items.forEach(item => {
              item.category = category; // Add category to part object
              allParts.push(item);
            });
          }
        }
      }
      
      // Apply filters
      let filteredParts = allParts.filter(part => {
        // Category filter
        if (currentFilters.category !== 'all' && part.category !== currentFilters.category) {
          return false;
        }
        
        // Price filter
        if (currentFilters.price !== 'all') {
          const price = part.price;
          if (currentFilters.price === 'budget' && price > 100) return false;
          if (currentFilters.price === 'mid-range' && (price <= 100 || price > 300)) return false;
          if (currentFilters.price === 'high-end' && price <= 300) return false;
        }
        
        // Search filter (searches name, brand, and key specs)
        if (currentFilters.search) {
          const searchTerm = currentFilters.search;
          const detailsString = getPartDetails(part, part.category).join(' ').toLowerCase();
          
          if (!part.name.toLowerCase().includes(searchTerm) && 
              !(part.brand && part.brand.toLowerCase().includes(searchTerm)) && // Add check for brand
              !detailsString.includes(searchTerm)) {
            return false;
          }
        }
        
        return true;
      });
      
      // Apply sorting
      filteredParts.sort((a, b) => {
        switch(currentFilters.sort) {
          case 'name':
            return a.name.localeCompare(b.name);
          case 'price-low':
            return a.price - b.price;
          case 'price-high':
            return b.price - a.price;
          case 'brand':
            // Handle parts that might not have a brand
            const brandA = a.brand || '';
            const brandB = b.brand || '';
            return brandA.localeCompare(brandB);
          default:
            return 0;
        }
      });
      
      // Display results
      if (filteredParts.length === 0) {
        partsGallery.innerHTML = `
          <div class="no-results">
            <h3>No parts found</h3>
            <p>Try adjusting your filters or search terms.</p>
          </div>
        `;
      } else {
        filteredParts.forEach(part => {
          partsGallery.appendChild(createPartCard(part));
        });
      }
      
      // Update results count
      updateResultsCount(filteredParts.length);
    }

    /**
     * Create part card element
     */
    function createPartCard(part) {
      const card = document.createElement('div');
      card.className = 'part-card';
      card.dataset.id = part.id || part.name; // Use name as fallback ID
      card.dataset.category = part.category;
      
      // Use component image if available, otherwise use placeholder
      const imageHtml = part.image ? 
        `<img src="${part.image}" alt="${part.name}" onerror="this.style.display='none'; this.parentNode.innerHTML='<div class=\\'part-placeholder\\'>🔧</div>'">` :
        `<div class="part-placeholder">🔧</div>`;
        
      // Get details using the helper function
      const detailsList = getPartDetails(part, part.category);
      const detailsHtml = detailsList.map(detail => `<span class="detail">${detail}</span>`).join('');
      
      card.innerHTML = `
        <div class="part-image">
          ${imageHtml}
        </div>
        <div class="part-info">
          <h4>${part.name}</h4>
          <div class="part-brand">${part.brand || 'N/A'}</div>
          <div class="part-price">$${part.price}</div>
          <div class="part-details">
            ${detailsHtml}
          </div>
        </div>
        <div class="part-actions">
          <a href="${part.link || '#'}" target="_blank" class="part-link">View Details</a>
          <button class="add-to-build" data-id="${part.id || part.name}">Add to Build</button>
        </div>
      `;
      
      // Add event listener to the add to build button
      const addButton = card.querySelector('.add-to-build');
      addButton.addEventListener('click', function() {
        addToBuild(part);
      });
      
      return card;
    }

    /**
     * Add part to build (placeholder function)
     */
    function addToBuild(part) {
      // In a real application, this would add the part to the current build
      alert(`Added ${part.name} to your build!`);
      // You could also save to localStorage or redirect to the manual builder
      // window.location.href = 'manual-build.html';
    }

    /**
     * Update results count text
     */
    function updateResultsCount(count) {
      let categoryText = '';
      if (currentFilters.category !== 'all') {
        const categoryName = getCategoryDisplayName(currentFilters.category);
        categoryText = ` in ${categoryName}`;
      }
      
      if (currentFilters.search) {
        categoryText = ` matching "${currentFilters.search}"`;
      }
      
      resultsCount.textContent = `Showing ${count} parts${categoryText}`;
    }

    /**
     * Update total count text
     */
    function updateTotalCount() {
      let total = 0;
      for (const category in pcData) {
        if (Object.prototype.hasOwnProperty.call(pcData, category) && Array.isArray(pcData[category])) {
          total += pcData[category].length;
        }
      }
      totalCount.textContent = `Total: ${total} parts`;
    }

    /**
     * Get display name for category
     */
    function getCategoryDisplayName(category) {
      const names = {
        'CPUs': 'CPUs',
        'Motherboards': 'Motherboards',
        'GPUs': 'GPUs',
        'RAM': 'RAM',
        'Storage': 'Storage',
        'PSUs': 'Power Supplies',
        'Cases': 'Cases',
        'all': 'All Categories'
      };
      return names[category] || category;
    }
  </script>
</body>
</html>
